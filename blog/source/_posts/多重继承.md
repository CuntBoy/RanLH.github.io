---
title: 多重继承下的菱形继承
date: 2022-08-19 20:58:37
categories:
- cpp
tags:
- inherit
---

`cpp`, 中关于继承的一点问题...

<!-- more -->

## 单继承

- 只有一父类的时候，称之为单继承

## 多继承

- 一个子类有两个及以上的父类，这个时候，称之为多继承

### 菱形继承

- 多继承下面的特殊状态, 会产生一些问题。
  - 当一个类的父类们同时拥有相同的父类的时候，就会发生二义性
![菱形继承](https://raw.githubusercontent.com/Ranbun/images/main/diamond_inheritance.PNG "菱形继承")

#### 问题

##### 1 二义性
- 解决访问的二义性相对简单，可以通过添加类的限定从而访问到具体的数据

    ```C++  
    class Author :public Student, public Teacher
    {
    public:
        Author()
        {
            Student::name_ = "";
            Teacher::name_ = "";
        }
    };

    ```


##### 2 数据冗余

- 从上面的图来看,菱形继承的数据发生了冗余，以及带来数据访问时候的二义性
  - 在`Author`中存在两份`Person`的数据
- 数据冗余的问题在`CPP`中通过使用虚继承解决




## 虚继承的实现原理
- virtual base table pointer
- virtual table