---
title: 透视矩阵计算
date: 2022-09-08 21:03:38
mathjax: true
categories:
- Computer Graphics
tags:
- cpp
---

在经过投影变换后，场景由三维变换到二维，这过程如何实现呢？
关于两种不同的投影方式计算生成对应的投影矩阵，该如何计算？
<!--more-->

## 投影变换

- 平行投影
- 透视投影

<center><img id="projection" src="https://raw.githubusercontent.com/Ranbun/images/main/blog/computer graph/projection.png"/></center>

- 当我们完成视图变换
    - 相机被移动到世界坐标系的原点，同时场景做了同样的相对位移。
    - 相机看向`-z`方向，我们指定了一个`up`,通过`cross`我们分别计算出三个轴向，相当远将世界坐标系做一个旋转操作，变换到$\vec{right},\vec{up},\vec{look}$ - 相机右方向，上方向，观察方向，<font color=red>场景也要做相同的旋转操作</font>
    - 下一步的操作便是投影
- 此时，我们的场景变换到了相机描述的坐标系下。
### 平行投影

- 如上图[平行投影与透视投影](#projection)所示：
平行投影没有近大远小的视觉效果，我们可以简单的丢掉所有顶点的`Z`值，将他们挤压到一个平面上，就可以得到一个平面的图。这将会丢掉维度信息，且不可逆，将场景变为二维，同是，对于关于`XOY`平面对称的点相当不友好[`-z,z`]，所以并不是一个合适的方法。

- 更好的做法是将场景移动到原点，然后做一次缩放，将场景的所有的顶点的坐标变换到$(x,y,z) \in [-1,1]^3$
    - 此时将会生成 `z-buffer`，三维场景的信息变为$[x,y]^2$的信息。





